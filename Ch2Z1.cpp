#include <iostream>
#include <cmath>
#include "Ch2Z1.h"

namespace HomeworkInCpp {

    void Ch2Z1::Run() {
        std::cout << "\n===== Часть 2. Задание 1 =====\n";
        std::cout << "Требуется для зависимости Y(X), заданной аналитически или графиком,";
        std::cout << "\nсоставить программу вычисления для вводимого X.\n";

        std::cout << "\nГрафик функции состоит из пяти участков:";
        std::cout << "\n1) На отрезке [-3, -2) функция возрастает по формуле Y = X + 3.";
        std::cout << "\n2) На отрезке [-2, -1) функция убывает по формуле Y = -X - 1.";
        std::cout << "\n3) На отрезке [-1, 1] функция является верхней полуокружностью радиуса 1: Y = sqrt(1 - X^2).";
        std::cout << "\n4) На отрезке (1, 2] функция возрастает по формуле Y = X - 1.";
        std::cout << "\n5) На отрезке (2, 3] функция убывает по формуле Y = -X + 3.\n";

        double x;
        std::cout << "\nВведите X (дроби в десятичном формате с разделителем '.'): ";
        std::cin >> x;

        if (!std::cin) {
            std::cout << "\nОшибка: некорректный ввод.\n";
            return;
        }

        double y;

        if (x >= -3 && x < -2) {
            y = x + 3;
        }
        else if (x >= -2 && x < -1) {
            y = -x - 1;
        }
        else if (x >= -1 && x <= 1) {
            y = std::sqrt(1 - x * x);
        }
        else if (x > 1 && x <= 2) {
            y = x - 1;
        }
        else if (x > 2 && x <= 3) {
            y = -x + 3;
        }
        else {
            std::cout << "\nЗначения функции для X за пределами [-3; 3] нет.\n";
            return;
        }

        std::cout << "\nY = " << y << ".\n";
    }
}